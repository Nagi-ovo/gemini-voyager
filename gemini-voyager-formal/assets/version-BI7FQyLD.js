const p="1.2.2",f={version:p},u=f.version,s={"gemini-voyager.folders.v1":"0.7.0"};function a(n){const e=n.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);return e?{major:parseInt(e[1],10),minor:parseInt(e[2],10),patch:parseInt(e[3],10),prerelease:e[4]}:null}function i(n,e){const r=a(n),o=a(e);if(!r||!o)throw new Error(`Invalid version format: ${r?e:n}`);return r.major!==o.major?r.major-o.major:r.minor!==o.minor?r.minor-o.minor:r.patch!==o.patch?r.patch-o.patch:r.prerelease&&!o.prerelease?-1:!r.prerelease&&o.prerelease?1:r.prerelease&&o.prerelease?r.prerelease.localeCompare(o.prerelease):0}function l(n,e){try{const r=s[e];return!r||!a(n)?!1:i(n,r)>=0}catch{return!1}}function m(n){return n in s}function h(n,e){const r={compatible:!1,currentVersion:u,importVersion:n,formatVersion:e};if(!m(e))return r.reason=`Unsupported format version: ${e}`,r;const o=s[e];if(r.minRequiredVersion=o,!a(n))return r.reason=`Invalid version format: ${n}`,r;try{const t=l(n,e);r.compatible=t,t||(r.reason=`Import version ${n} is below minimum required version ${o}`)}catch{r.reason=`Invalid version format: ${n}`}return r}const d=[];function I(n,e){let r=n;const o=[];for(const t of d)if(i(e,t.fromVersion)>=0&&i(e,t.toVersion)<0)try{r=t.migrate(r),o.push(`${t.fromVersion} → ${t.toVersion}: ${t.description}`)}catch(c){throw new Error(`Migration failed (${t.fromVersion} → ${t.toVersion}): ${c}`)}return{data:r,migrationsApplied:o}}export{u as E,I as a,i as c,h as g,m as i};
